import{_ as s,o as a,c as n,V as l}from"./chunks/framework.0020f959.js";const C=JSON.parse('{"title":"å…³äºå‰ç«¯ä¸‹è½½çš„ä¸€äº›é—®é¢˜","description":"","frontmatter":{"title":"å…³äºå‰ç«¯ä¸‹è½½çš„ä¸€äº›é—®é¢˜","date":"2023-01-15T00:00:00.000Z","tags":["javascript","éšç¬”"],"categories":["javascript"]},"headers":[],"relativePath":"blogs/informal-essay/download.md","lastUpdated":1685957522000}'),o={name:"blogs/informal-essay/download.md"},p=l(`<h2 id="å‰è¨€ã€½ï¸" tabindex="-1">å‰è¨€ã€½ï¸ <a class="header-anchor" href="#å‰è¨€ã€½ï¸" aria-label="Permalink to &quot;å‰è¨€ã€½ï¸&quot;">â€‹</a></h2><p>å‰ç«¯æ–‡ä»¶ä¸‹è½½åº”è¯¥æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ğŸ˜†ï¼Œè¿™æ¬¡ä¸»è¦æ˜¯ç»“åˆè‡ªå·±æœ€è¿‘åœ¨é¡¹ç›®ä¸­çš„å®è·µå’Œç™¾åº¦æ¥çš„ä¸€äº›ä¸‹è½½æ–¹å¼ï¼Œå¦‚æœæœ‰é—æ¼æˆ–è€…é”™è¯¯çš„åœ°æ–¹ï¼Œå¸Œæœ›å¤§å®¶åŠæ—¶æŒ‡å‡ºğŸ™‡ã€‚</p><h2 id="_1ã€aæ ‡ç­¾ğŸ¥‡" tabindex="-1">1ã€aæ ‡ç­¾ğŸ¥‡ <a class="header-anchor" href="#_1ã€aæ ‡ç­¾ğŸ¥‡" aria-label="Permalink to &quot;1ã€aæ ‡ç­¾ğŸ¥‡&quot;">â€‹</a></h2><p>aæ ‡ç­¾ä¸‹è½½åº”è¯¥æ˜¯ç›®å‰å¤§å®¶ç”¨çš„æœ€å¤šçš„ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼äº†å§ï¼Œæ¯•ç«Ÿå®ƒç®€å•æ˜äº†ã€‚</p><p>aæ ‡ç­¾åˆ†ä¸¤ç§ï¼šç›´æ¥aæ ‡ç­¾ç‚¹å‡»ä¸‹è½½ï¼ˆdownloadå±æ€§ï¼‰ã€æ¨¡æ‹Ÿaæ ‡ç­¾ä¸‹è½½ã€‚æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸ä¸€è‡´è€Œå·²ğŸ˜ºã€‚</p><h3 id="_1-1ã€aæ ‡ç­¾çš„downloadâœ¨âœ¨âœ¨" tabindex="-1">1.1ã€aæ ‡ç­¾çš„downloadâœ¨âœ¨âœ¨ <a class="header-anchor" href="#_1-1ã€aæ ‡ç­¾çš„downloadâœ¨âœ¨âœ¨" aria-label="Permalink to &quot;1.1ã€aæ ‡ç­¾çš„downloadâœ¨âœ¨âœ¨&quot;">â€‹</a></h3><p><code>download</code> å±æ€§æ˜¯HTML5æ–°å¢çš„å±æ€§ï¼Œä¸»è¦è§£å†³ä¸èƒ½ç›´æ¥ä¸‹è½½<strong>æµè§ˆå™¨å¯ä»¥æ‰“å¼€é¢„è§ˆçš„æ–‡ä»¶</strong>çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼štxtã€pngã€jpgç­‰æ–‡ä»¶ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å…¼å®¹æ€§ï¼Œä¸»æµæµè§ˆå™¨å¤§éƒ¨åˆ†éƒ½æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œå¦‚æœè¦å‘ä¸‹å…¼å®¹å»ºè®®é‡‡ç”¨å…¶å®ƒçš„æ–¹å¼è¿›è¡Œä¸‹è½½ğŸ‘ã€‚ï¼ˆæˆªå›¾æ¥æºäº <a href="https://caniuse.com/?search=a%3Adownload" target="_blank" rel="noreferrer">Can I use</a>ï¼‰</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a13ef20e0c9344c69250ab6c1777361a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><blockquote><p>âš¡æ³¨æ„ï¼šä¸‹è½½è·¨åŸŸæ–‡ä»¶ä¼šå¯¼è‡´ <code>download</code> å±æ€§å¤±æ•ˆã€‚</p></blockquote><ul><li>ç”¨æ³•ğŸ¤ª</li></ul><p><code>download</code> å±æ€§å¯ä»¥æŒ‡å®šä¸‹è½½çš„æ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¦‚æœæœ‰å±æ€§å€¼åˆ™è¯¥å±æ€§å€¼å°±æ˜¯ä¸‹è½½åçš„æ–‡ä»¶çš„æ–‡ä»¶åã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">download</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">ç‚¹å‡»ä¸‹è½½</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// é»˜è®¤æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">download</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">ç‚¹å‡»ä¸‹è½½</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// æŒ‡å®šæ–‡ä»¶å1.jpg</span></span></code></pre></div><h2 id="_2ã€æ¨¡æ‹Ÿaæ ‡ç­¾ä¸‹è½½âœ¨âœ¨âœ¨âœ¨âœ¨" tabindex="-1">2ã€æ¨¡æ‹Ÿaæ ‡ç­¾ä¸‹è½½âœ¨âœ¨âœ¨âœ¨âœ¨ <a class="header-anchor" href="#_2ã€æ¨¡æ‹Ÿaæ ‡ç­¾ä¸‹è½½âœ¨âœ¨âœ¨âœ¨âœ¨" aria-label="Permalink to &quot;2ã€æ¨¡æ‹Ÿaæ ‡ç­¾ä¸‹è½½âœ¨âœ¨âœ¨âœ¨âœ¨&quot;">â€‹</a></h2><p>è¿™é‡Œä¹Ÿæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„æ–‡ä»¶æµè½¬ <code>blob/base64</code>ä¸‹è½½ï¼Œåªä¸è¿‡æ˜¯ä¸ºäº†æ–¹ä¾¿æ•´ç†æ‰èµ·çš„è¿™ä¸ªæ ‡é¢˜åğŸ™‡ã€‚</p><h3 id="_2-1ã€åˆ©ç”¨blob-url-createobjecturl-ğŸ‘" tabindex="-1">2.1ã€åˆ©ç”¨blobï¼ˆURL.createObjectURLï¼‰ğŸ‘ <a class="header-anchor" href="#_2-1ã€åˆ©ç”¨blob-url-createobjecturl-ğŸ‘" aria-label="Permalink to &quot;2.1ã€åˆ©ç”¨blobï¼ˆURL.createObjectURLï¼‰ğŸ‘&quot;">â€‹</a></h3><p>åˆ©ç”¨ <code>URLå¯¹è±¡</code> çš„ <code>createObjectURL</code> æ–¹æ³•å»è¯»å–æ–‡ä»¶æµï¼Œç„¶åé€šè¿‡ <code>js</code> å»æ¨¡æ‹Ÿ <code>a</code> æ ‡ç­¾ç‚¹å‡»æ¥ä¸‹è½½æ–‡ä»¶ã€‚</p><p>å…¼å®¹æ€§æŸ¥è¯¢ï¼Œå¯ä»¥çœ‹å‡ºæ¥ä¸»æµæµè§ˆå™¨åŸºæœ¬ä¸Šéƒ½å…¼å®¹æ­¤æ–¹æ³•ğŸ¤ªã€‚ï¼ˆæˆªå›¾æ¥æºäº <a href="https://caniuse.com/?search=createObjectURL" target="_blank" rel="noreferrer">Can I use</a>ï¼‰</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ab876077bbd4ec3910fe119aebeef86~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* ä¸‹è½½æ–‡ä»¶ </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#676E95;font-style:italic;"> - æ–‡ä»¶æµ(blobæ ¼å¼)ã€‚</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#676E95;font-style:italic;"> - ä¸‹è½½æ–‡ä»¶çš„åå­—ï¼ˆè€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œæœ€å¥½åŠ ä¸Šåç¼€å)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">downloadFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è¯»å–æ–‡ä»¶æµ</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createObjectURL</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">blob</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºaæ ‡ç­¾å¹¶è®¾ç½®å±æ€§</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">display</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">href</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">download</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileName</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// é‡Šæ”¾ä¹‹å‰åˆ›å»ºçš„URL å¯¹è±¡</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">revokeObjectURL</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="_2-2ã€ä½¿ç”¨base64-filereader-readasdataurl-ğŸ‘" tabindex="-1">2.2ã€ä½¿ç”¨base64ï¼ˆFileReader.readAsDataURLï¼‰ğŸ‘ <a class="header-anchor" href="#_2-2ã€ä½¿ç”¨base64-filereader-readasdataurl-ğŸ‘" aria-label="Permalink to &quot;2.2ã€ä½¿ç”¨base64ï¼ˆFileReader.readAsDataURLï¼‰ğŸ‘&quot;">â€‹</a></h3><p><code>readAsDataURL()</code> æ–¹æ³•ä¼šå¼‚æ­¥è¯»å–æŒ‡å®šçš„ <code>Blob</code> æˆ– <code>File</code> å¯¹è±¡ï¼Œå¹¶åœ¨è¯»å–å®Œæˆæ—¶ï¼Œé€šè¿‡ <code>onload</code> å›è°ƒå‡½æ•°çš„ <code>result</code> å±æ€§è¿”å› <code>data:URL</code> æ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆbase64ç¼–ç ï¼‰ã€‚</p><p>å…¼å®¹æ€§æŸ¥è¯¢ï¼Œå¯ä»¥çœ‹å‡ºæ¥ä¸»æµæµè§ˆå™¨åŸºæœ¬ä¸Šéƒ½å…¼å®¹æ­¤æ–¹æ³•ğŸ¤ªã€‚ï¼ˆæˆªå›¾æ¥æºäº <a href="https://caniuse.com/?search=readAsDataURL" target="_blank" rel="noreferrer">Can I use</a>ï¼‰</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b1f7f4dac5f48989d09b1fc108be59b~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* ä¸‹è½½æ–‡ä»¶ </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#676E95;font-style:italic;"> - æ–‡ä»¶æµ(blobæ ¼å¼)ã€‚</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#676E95;font-style:italic;"> - ä¸‹è½½æ–‡ä»¶çš„åå­—ï¼ˆè€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œæœ€å¥½åŠ ä¸Šåç¼€å)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">downloadFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è¯»å–æ–‡ä»¶æµ</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reader</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">FileReader</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">reader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readAsDataURL</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">blob</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è¯»å–å®Œæˆçš„å›è°ƒäº‹ä»¶</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">reader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onload</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºaæ ‡ç­¾å¹¶è®¾ç½®å±æ€§</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">display</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">href</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">result</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">download</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileName</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p>âš¡æ³¨æ„ï¼šåœ¨ <code>api</code> è¿”å› <code>blob</code> çš„æ—¶å€™éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­è®¾ç½® <code>responseType</code> ä¸º <code>&#39;blob&#39;</code>ã€‚</p></blockquote><h2 id="_3ã€open-location-hrefâœ¨" tabindex="-1">3ã€open/location.hrefâœ¨ <a class="header-anchor" href="#_3ã€open-location-hrefâœ¨" aria-label="Permalink to &quot;3ã€open/location.hrefâœ¨&quot;">â€‹</a></h2><p>åº”è¯¥æ˜¯æœ€ç®€å•ç›´æ¥çš„ä¸‹è½½äº†å§ï¼Œä¸è¿‡å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ‰€ä»¥ç°åœ¨ç”¨çš„æ¯”è¾ƒå°‘äº†ã€‚</p><p><strong>ç”¨æ³•</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloadFile.zip</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">href </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloadFile.zip</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre></div><blockquote><p>âš¡ä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦æ³¨æ„ï¼šURLé•¿åº¦é™åˆ¶ã€urlç¼–ç ã€æµè§ˆå™¨å¯ç›´æ¥æµè§ˆçš„æ–‡ä»¶ç±»å‹æ˜¯ä¸æä¾›ä¸‹è½½çš„ï¼Œå¦‚txtã€pngã€jpgã€gifç­‰ã€ä¸èƒ½æ·»åŠ headerï¼Œä¹Ÿå°±ä¸èƒ½è¿›è¡Œé‰´æƒã€æ— æ³•çŸ¥é“ä¸‹è½½çš„è¿›åº¦ç­‰é—®é¢˜ã€‚</p></blockquote><h2 id="_4ã€formè¡¨å•âœ¨âœ¨" tabindex="-1">4ã€formè¡¨å•âœ¨âœ¨ <a class="header-anchor" href="#_4ã€formè¡¨å•âœ¨âœ¨" aria-label="Permalink to &quot;4ã€formè¡¨å•âœ¨âœ¨&quot;">â€‹</a></h2><p>åº”è¯¥æ˜¯æœ€ä¼ ç»Ÿçš„æ–‡ä»¶ä¸‹è½½æ–¹å¼äº†å§ï¼Œå¾ˆå¤šæ–°ç‰¹æ€§éƒ½æ˜¯åœ¨H5æ‰å‡ºçš„ï¼Œå…¼å®¹æ€§åº”è¯¥ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚</p><p>å®ç°æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡jsåŠ¨æ€åˆ›å»ºformè¡¨å•ï¼Œç„¶ååˆ©ç”¨formè¡¨å•çš„æäº¤æ¥è·å–æ–‡ä»¶ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* ä¸‹è½½æ–‡ä»¶</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">downloadUrl</span><span style="color:#676E95;font-style:italic;"> - è¯·æ±‚çš„åœ°å€</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#676E95;font-style:italic;"> - æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">downloadFile</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">downloadUrl</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºè¡¨å•</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">formObj</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">form</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">downloadUrl</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">display</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºinputï¼Œç”¨äºä¼ å‚</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">formItem</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formItem</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileName</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formItem</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fileName</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formObj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">formItem</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">formObj</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">formObj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// æ¸…é™¤formè¡¨å•</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">formObj</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p>âš¡æ³¨æ„ï¼šæµè§ˆå™¨å¯ç›´æ¥æµè§ˆçš„æ–‡ä»¶ç±»å‹å¦‚txtã€pngã€jpgã€gifç­‰ä¸èƒ½é€šè¿‡æ­¤æ–¹æ³•ä¸‹è½½ã€‚</p></blockquote><h2 id="_4ã€é€šè¿‡iframeä¸‹è½½âœ¨âœ¨âœ¨" tabindex="-1">4ã€é€šè¿‡iframeä¸‹è½½âœ¨âœ¨âœ¨ <a class="header-anchor" href="#_4ã€é€šè¿‡iframeä¸‹è½½âœ¨âœ¨âœ¨" aria-label="Permalink to &quot;4ã€é€šè¿‡iframeä¸‹è½½âœ¨âœ¨âœ¨&quot;">â€‹</a></h2><p><code>iframe</code> ä¸‹è½½æ–‡ä»¶è·Ÿ <code>a</code> æ ‡ç­¾ä¸‹è½½æ–‡ä»¶åŸºæœ¬ä¸€è‡´ï¼ŒåŒæ ·ä¸èƒ½ä¸‹è½½æµè§ˆå™¨å¯ä»¥æµè§ˆçš„æ–‡ä»¶ã€‚</p><p><strong>è¯´å®è¯ï¼Œiframeæ¥è§¦çš„æ¯”è¾ƒå°‘ï¼Œå¦‚æœæœ‰é”™è¯¯æˆ–è€…ä¸è¶³çš„åœ°æ–¹è¯·å¤§å®¶è¡¥å……ï¼Œè°¢è°¢ğŸ™ğŸ™ã€‚</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* ä¸‹è½½æ–‡ä»¶</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">downloadUrl</span><span style="color:#676E95;font-style:italic;"> - è¯·æ±‚çš„åœ°å€</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#676E95;font-style:italic;"> - æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">downloadFile</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">downloadUrl</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºiframe </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iframe</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">display</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">downloadUrl</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">iframe</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¼‚æ­¥åˆ é™¤iframeæ ‡ç­¾</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">remove</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">5</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">60</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">)</span></span></code></pre></div><h2 id="ç»“å°¾ğŸ”š" tabindex="-1">ç»“å°¾ğŸ”š <a class="header-anchor" href="#ç»“å°¾ğŸ”š" aria-label="Permalink to &quot;ç»“å°¾ğŸ”š&quot;">â€‹</a></h2><p>æœ¬æ–‡ä¸»è¦æ˜¯æ€»ç»“è‡ªå·±çŸ¥é“/ç”¨è¿‡çš„ä¸‹è½½æ–‡ä»¶çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸è¶³æˆ–è€…é”™è¯¯ä¹‹å¤„ï¼Œè¯·å¤§å®¶åŠæ—¶æŒ‡æ­£ğŸ™ã€‚</p><blockquote><p>åšå®¢ä¸»è¦è®°å½•ä¸€äº›å­¦ä¹ çš„æ–‡ç« ï¼Œå¦‚æœ‰ä¸è¶³ï¼Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œè°¢è°¢ã€‚</p></blockquote>`,42),e=[p];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const d=s(o,[["render",t]]);export{C as __pageData,d as default};
